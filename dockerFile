FROM python:3.10

ARG AWS_S3_BUCKET_STATIC_FILES_BUCKET_KEY
ARG AWS_S3_SECRET_KEY_ID_STATIC_FILES
ARG AWS_S3_BUCKET_URL
ARG AWS_S3_BUCKET_NAME
ARG DB_USER_NAME
ARG DB_NAME
ARG DB_PASSWORD
ARG DB_HOST
ARG DB_PORT
ARG DJANGO_SECRET_KEY
ARG APP_DEBUG
ARG ANTHROPIC_API_KEY
ARG ELEVEN_LABS_API_KEY
ARG SQS_ACCESS_KEY_ID
ARG SQS_SECRET_ACCESS_KEY

ENV AWS_S3_BUCKET_STATIC_FILES_BUCKET_KEY=${AWS_S3_BUCKET_STATIC_FILES_BUCKET_KEY}
ENV AWS_S3_SECRET_KEY_ID_STATIC_FILES=${AWS_S3_SECRET_KEY_ID_STATIC_FILES}
ENV AWS_S3_BUCKET_URL=${AWS_S3_BUCKET_URL}
ENV AWS_S3_BUCKET_NAME=${AWS_S3_BUCKET_NAME}
ENV DB_USER_NAME=${DB_USER_NAME}
ENV DB_NAME=${DB_NAME}
ENV DB_PASSWORD=${DB_PASSWORD}
ENV DB_HOST=${DB_HOST}
ENV DB_PORT=${DB_PORT}
ENV DJANGO_SECRET_KEY=${DJANGO_SECRET_KEY}
ENV APP_DEBUG=${APP_DEBUG}
ENV ANTHROPIC_API_KEY=${ANTHROPIC_API_KEY}
ENV ELEVEN_LABS_API_KEY=${ELEVEN_LABS_API_KEY}
ENV SQS_ACCESS_KEY_ID=${SQS_ACCESS_KEY_ID}
ENV SQS_SECRET_ACCESS_KEY=${SQS_SECRET_ACCESS_KEY}

ENV PYTHONUNBUFFERED 1
RUN mkdir /ykurc
WORKDIR /ykurc
COPY requirements.txt /ykurc/
RUN pip install --upgrade pip wheel
RUN pip install -r requirements.txt
COPY . /ykurc/
RUN chmod +x ./run.sh


CMD ["./run.sh"]